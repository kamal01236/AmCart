<mxfile host="app.diagrams.net" agent="GitHub Copilot" version="29.3.4">
  <diagram name="Architecture" id="amcart-arch-v2">
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1400" pageHeight="900" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="edge-1" edge="1" parent="1" source="node-user" target="node-dns" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-2" edge="1" parent="1" source="node-dns" target="node-cdn" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-3" edge="1" parent="1" source="node-cdn" target="node-waf" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-4" edge="1" parent="1" source="node-waf" target="node-lb" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-5" edge="1" parent="1" source="node-lb" target="node-aks" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-6" edge="1" parent="1" source="node-web" target="node-api" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=block;" />
        <mxCell id="edge-7" edge="1" parent="1" source="node-api" target="node-workers" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=block;" />
        <mxCell id="edge-8" edge="1" parent="1" source="node-api" target="node-db" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-9" edge="1" parent="1" source="node-api" target="node-cache" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-10" edge="1" parent="1" source="node-workers" target="node-queue" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-11" edge="1" parent="1" source="node-api" target="node-storage" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;" />
        <mxCell id="edge-12" edge="1" parent="1" source="node-aks" target="node-observability" style="edgeStyle=elbowEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=block;" />
        <mxCell id="node-user" value="End Users" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#232F3D;fontColor=#FFFFFF;strokeColor=#1A1A1A;" vertex="1" parent="1">
          <mxGeometry x="40" y="260" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="node-dns" value="DNS / Traffic Manager\nGeo + Latency Routing\nHealth Checks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#000000;fontColor=#FFFFFF;strokeColor=#1A1A1A;" vertex="1" parent="1">
          <mxGeometry x="200" y="250" width="170" height="80" as="geometry" />
        </mxCell>
        <mxCell id="node-cdn" value="CDN\nEdge Caching\nTLS Termination" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#D5E8D4;strokeColor=#82B366;" vertex="1" parent="1">
          <mxGeometry x="400" y="250" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="node-waf" value="WAF + DDoS\nBot Protection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE6CC;strokeColor=#D79B00;" vertex="1" parent="1">
          <mxGeometry x="580" y="250" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="node-lb" value="Regional Ingress / LB\nHealth Probes\nPath Routing" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8CECC;strokeColor=#B85450;" vertex="1" parent="1">
          <mxGeometry x="760" y="250" width="190" height="80" as="geometry" />
        </mxCell>
        <mxCell id="node-aks" value="AKS Cluster\nMulti-node pools" style="swimlane;rounded=1;whiteSpace=wrap;html=1;fillColor=#E1D5E7;strokeColor=#9673A6;" vertex="1" parent="1">
          <mxGeometry x="320" y="380" width="630" height="260" as="geometry" />
        </mxCell>
        <mxCell id="node-web" value="Web Frontend Pods\n(React / SPA)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;" vertex="1" parent="node-aks">
          <mxGeometry x="20" y="60" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-api" value="API Pods\nREST/GraphQL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;" vertex="1" parent="node-aks">
          <mxGeometry x="220" y="60" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-workers" value="Worker Pods\nQueues + Jobs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DAE8FC;strokeColor=#6C8EBF;" vertex="1" parent="node-aks">
          <mxGeometry x="420" y="60" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-service-mesh" value="Service Mesh\nmTLS + retries" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF2CC;strokeColor=#D6B656;" vertex="1" parent="node-aks">
          <mxGeometry x="220" y="150" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="node-db" value="Managed Database\nPostgreSQL" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1010" y="360" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-cache" value="Cache\nRedis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1010" y="450" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-queue" value="Message Queue\nService Bus" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1010" y="540" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-storage" value="Object Storage\nImages + Assets" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F5F5F5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="1010" y="630" width="170" height="70" as="geometry" />
        </mxCell>
        <mxCell id="node-observability" value="Observability\nLogs + Metrics + Traces" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E6E6E6;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="600" y="680" width="220" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>